let op,len,ns,attr,i,value,element,ptr,pos,end,out,char,numAttributes,endRounded,inptr,op_batch,buffer,metadata,parent,children,node,name,id,nodes;export function work_last_created(){inptr.Work()};export function last_needs_memory(){return!buffer.byteLength};export function update_last_memory(t){inptr.UpdateMemory(t)};function exOp(){switch(31&op){case 0:inptr.lastNode=inptr.lastNode.firstChild;break;case 1:inptr.lastNode=inptr.lastNode.nextSibling;break;case 2:inptr.lastNode=inptr.lastNode.parentNode;break;case 3:inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)]=inptr.lastNode,inptr.u8BufPos+=4;break;case 4:inptr.lastNode=inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)],inptr.u8BufPos+=4;break;case 5:return!0;case 6:inptr.createFullElement();break;case 7:if(32&op?(parent=inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)],inptr.u8BufPos+=4):parent=inptr.lastNode,64&op)for(len=inptr.decodeU32(),i=0;i<len;i++)parent.appendChild(inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)]),inptr.u8BufPos+=4;else parent.appendChild(inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)]),inptr.u8BufPos+=4;break;case 8:if(32&op?(parent=inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)],inptr.u8BufPos+=4):parent=inptr.lastNode,64&op){for(len=inptr.decodeU32(),children=[],i=0;i<len;i++)children.push(inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)]),inptr.u8BufPos+=4;parent.replaceWith(...children)}else parent.replaceWith(inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)]),inptr.u8BufPos+=4;break;case 9:if(32&op?(parent=inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)],inptr.u8BufPos+=4):parent=inptr.lastNode,64&op){for(len=inptr.decodeU32(),children=[],i=0;i<len;i++)children.push(inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)]),inptr.u8BufPos+=4;parent.after(...children)}else parent.after(inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)]),inptr.u8BufPos+=4;break;case 10:if(32&op?(parent=inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)],inptr.u8BufPos+=4):parent=inptr.lastNode,64&op){for(len=inptr.decodeU32(),children=[],i=0;i<len;i++)children.push(inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)]),inptr.u8BufPos+=4;parent.before(...children)}else parent.before(inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)]),inptr.u8BufPos+=4;break;case 11:32&op?(inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)].remove(),inptr.u8BufPos+=4):inptr.lastNode.remove();break;case 12:inptr.lastNode=document.createTextNode(inptr.strings.substring(inptr.strPos,inptr.strPos+=inptr.view.getUint16(inptr.u8BufPos,!0))),inptr.u8BufPos+=2,32&op&&(inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)]=inptr.lastNode,inptr.u8BufPos+=4);break;case 13:name=inptr.strings.substring(inptr.strPos,inptr.strPos+=inptr.view.getUint16(inptr.u8BufPos,!0)),inptr.u8BufPos+=2,32&op?(inptr.lastNode=document.createElementNS(name,inptr.strings.substring(inptr.strPos,inptr.strPos+=inptr.view.getUint16(inptr.u8BufPos,!0))),inptr.u8BufPos+=2):inptr.lastNode=document.createElement(name),64&op&&(inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)]=inptr.lastNode,inptr.u8BufPos+=4);break;case 14:32&op?(id=inptr.view.getUint32(inptr.u8BufPos,!0),inptr.u8BufPos+=4,inptr.nodes[id].textContent=inptr.strings.substring(inptr.strPos,inptr.strPos+=inptr.view.getUint16(inptr.u8BufPos,!0)),inptr.u8BufPos+=2):(inptr.lastNode.textContent=inptr.strings.substring(inptr.strPos,inptr.strPos+=inptr.view.getUint16(inptr.u8BufPos,!0)),inptr.u8BufPos+=2);break;case 15:32&op?(node=inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)],inptr.u8BufPos+=4):node=inptr.lastNode,64&op?(attr=inptr.strings.substring(inptr.strPos,inptr.strPos+=inptr.view.getUint16(inptr.u8BufPos,!0)),inptr.u8BufPos+=2,node.setAttribute(attr,inptr.strings.substring(inptr.strPos,inptr.strPos+=inptr.view.getUint16(inptr.u8BufPos,!0))),inptr.u8BufPos+=2):(node.setAttribute(attrs[inptr.view.getUint8(inptr.u8BufPos++)],inptr.strings.substring(inptr.strPos,inptr.strPos+=inptr.view.getUint16(inptr.u8BufPos,!0))),inptr.u8BufPos+=2);break;case 16:32&op?(node=inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)],inptr.u8BufPos+=4):node=inptr.lastNode,attr=inptr.strings.substring(inptr.strPos,inptr.strPos+=inptr.view.getUint16(inptr.u8BufPos,!0)),inptr.u8BufPos+=2,ns=inptr.strings.substring(inptr.strPos,inptr.strPos+=inptr.view.getUint16(inptr.u8BufPos,!0)),inptr.u8BufPos+=2,value=inptr.strings.substring(inptr.strPos,inptr.strPos+=inptr.view.getUint16(inptr.u8BufPos,!0)),inptr.u8BufPos+=2,"style"===ns?node.style[attr]=value:null==ns&&null==ns||node.setAttributeNS(ns,attr,value);break;case 17:32&op?(node=inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)],inptr.u8BufPos+=4):node=inptr.lastNode,64&op?(node.removeAttribute(inptr.strings.substring(inptr.strPos,inptr.strPos+=inptr.view.getUint16(inptr.u8BufPos,!0))),inptr.u8BufPos+=2):node.removeAttribute(attrs[inptr.view.getUint8(inptr.u8BufPos++)]);break;case 18:32&op?(node=inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)],inptr.u8BufPos+=4):node=inptr.lastNode,attr=inptr.strings.substring(inptr.strPos,inptr.strPos+=inptr.view.getUint16(inptr.u8BufPos,!0)),inptr.u8BufPos+=2,node.removeAttributeNS(inptr.strings.substring(inptr.strPos,inptr.strPos+=inptr.view.getUint16(inptr.u8BufPos,!0)),attr),inptr.u8BufPos+=2;break;case 19:if(32&op){const t=inptr.view.getUint32(inptr.u8BufPos,!0);inptr.lastNode=inptr.nodes[t].cloneNode(!0),inptr.u8BufPos+=4}else inptr.lastNode=inptr.lastNode.cloneNode(!0);64&op&&(inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)]=inptr.lastNode,inptr.u8BufPos+=4);break;case 20:for(32&op?(node=inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)].cloneNode(!0).firstChild,inptr.u8BufPos+=4):node=inptr.lastNode.cloneNode(!0).firstChild;null!==node;node=node.nextSibling)1===inptr.view.getUint8(inptr.u8BufPos++)&&(inptr.nodes[inptr.view.getUint32(inptr.u8BufPos,!0)]=node,inptr.u8BufPos+=4)}}export class JsInterpreter{constructor(t,e,i,r,n,s){this.root=t,this.lastNode=t,this.nodes=[t],this.parents=[],this.UpdateMemory(e),this.last_start_pos,this.metadata_ptr=i,this.ptr_ptr=r,this.str_ptr_ptr=n,this.str_len_ptr=s,this.strings="",this.strPos=0,this.decoder=new TextDecoder,this.idSize=1,inptr=this}NeedsMemory(){return 0===this.view.buffer.byteLength}UpdateMemory(t){this.view=new DataView(t.buffer),buffer=t.buffer}Work(){for(1&(metadata=this.view.getUint8(this.metadata_ptr))&&(this.last_start_pos=this.view.getUint32(this.ptr_ptr,!0)),this.u8BufPos=this.last_start_pos,2&metadata&&(len=this.view.getUint32(this.str_len_ptr,!0),ptr=this.view.getUint32(this.str_ptr_ptr,!0),this.strings=len<100?4&metadata?this.batchedAsciiDecode(ptr,len):this.utf8Decode(ptr,len):this.decoder.decode(new DataView(this.view.buffer,ptr,len)),this.strPos=0);;){if(op_batch=this.view.getUint32(this.u8BufPos,!0),this.u8BufPos+=4,op=255&op_batch,exOp())return;if(op=255&(op_batch>>>=8),exOp())return;if(op=255&(op_batch>>>=8),exOp())return;if(op=255&(op_batch>>>=8),exOp())return}}createElement(){return 255===(element=this.view.getUint8(this.u8BufPos++))?(element=document.createElement(this.strings.substring(this.strPos,this.strPos+=this.view.getUint16(this.u8BufPos,!0))),this.u8BufPos+=2,element):document.createElement(els[element])}createFullElement(){const t=this.decodeMaybeIdByteBool(),e=this.createElement();for(numAttributes=this.view.getUint8(this.u8BufPos++),i=0;i<numAttributes;i++)switch(attr=this.view.getUint8(this.u8BufPos++)){case 254:attr=this.strings.substring(this.strPos,this.strPos+=this.view.getUint16(this.u8BufPos,!0)),this.u8BufPos+=2,ns=this.strings.substring(this.strPos,this.strPos+=this.view.getUint16(this.u8BufPos,!0)),this.u8BufPos+=2,value=this.strings.substring(this.strPos,this.strPos+=this.view.getUint16(this.u8BufPos,!0)),this.u8BufPos+=2,e.setAttributeNS(ns,attr,value);break;case 255:attr=this.strings.substring(this.strPos,this.strPos+=this.view.getUint16(this.u8BufPos,!0)),this.u8BufPos+=2,e.setAttribute(attr,this.strings.substring(this.strPos,this.strPos+=this.view.getUint16(this.u8BufPos,!0))),this.u8BufPos+=2;break;default:e.setAttribute(attrs[attr],this.strings.substring(this.strPos,this.strPos+=this.view.getUint16(this.u8BufPos,!0))),this.u8BufPos+=2}const r=this.view.getUint8(this.u8BufPos++);for(let t=0;t<r;t++)e.appendChild(this.createFullElement());return null!==t&&(this.nodes[t]=e),e}decodeMaybeIdByteBool(){if(0===this.view.getUint8(this.u8BufPos++))return null;{const t=this.view.getUint32(this.u8BufPos,!0);return this.u8BufPos+=4,t}}decodeU32(){return this.u8BufPos+=4,this.view.getUint32(this.u8BufPos-4,!0)}SetNode(t,e){this.nodes[t]=e}GetNode(t){return this.nodes[t]}utf8Decode(t,e){for(end=(pos=t)+e,out="";pos<end;)if(0==(128&(char=this.view.getUint8(pos++))))out+=String.fromCharCode(char);else if(192==(224&char))out+=String.fromCharCode((31&char)<<6|63&this.view.getUint8(pos++));else if(224==(240&char))out+=String.fromCharCode((31&char)<<12|(63&this.view.getUint8(pos++))<<6|63&this.view.getUint8(pos++));else if(240==(248&char)){let t=(7&char)<<18|(63&this.view.getUint8(pos++))<<12|(63&this.view.getUint8(pos++))<<6|63&this.view.getUint8(pos++);t>65535&&(t-=65536,out+=String.fromCharCode(t>>>10&1023|55296),t=56320|1023&t),out+=String.fromCharCode(t)}else out+=String.fromCharCode(char);return out}batchedAsciiDecode(t,e){for(end=(pos=t)+e,out="",endRounded=pos+4*(e/4|0);pos<endRounded;)char=this.view.getUint32(pos),out+=String.fromCharCode(char>>24,(16711680&char)>>16,(65280&char)>>8,255&char),pos+=4;for(;pos<end;)out+=String.fromCharCode(this.view.getUint8(pos++));return out}};const els=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","portal","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"],attrs=["accept-charset","accept","accesskey","action","align","allow","alt","aria-atomic","aria-busy","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-dropeffect","aria-errormessage","aria-flowto","aria-grabbed","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-live","aria-owns","aria-relevant","aria-roledescription","async","autocapitalize","autocomplete","autofocus","autoplay","background","bgcolor","border","buffered","capture","challenge","charset","checked","cite","class","code","codebase","color","cols","colspan","content","contenteditable","contextmenu","controls","coords","crossorigin","csp","data","datetime","decoding","default","defer","dir","dirname","disabled","download","draggable","enctype","enterkeyhint","for","form","formaction","formenctype","formmethod","formnovalidate","formtarget","headers","height","hidden","high","href","hreflang","http-equiv","icon","id","importance","inputmode","integrity","intrinsicsize","ismap","itemprop","keytype","kind","label","lang","language","list","loading","loop","low","manifest","max","maxlength","media","method","min","minlength","multiple","muted","name","novalidate","open","optimum","pattern","ping","placeholder","poster","preload","radiogroup","readonly","referrerpolicy","rel","required","reversed","role","rows","rowspan","sandbox","scope","scoped","selected","shape","size","sizes","slot","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","summary","tabindex","target","title","translate","type","usemap","value","width","wrap"],events=["abort","activate","addstream","addtrack","afterprint","afterscriptexecute","animationcancel","animationend","animationiteration","animationstart","appinstalled","audioend","audioprocess","audiostart","auxclick","beforeinput","beforeprint","beforescriptexecute","beforeunload","beginEvent","blocked","blur","boundary","bufferedamountlow","cancel","canplay","canplaythrough","change","click","close","closing","complete","compositionend","compositionstart","compositionupdate","connect","connectionstatechange","contentdelete","contextmenu","copy","cuechange","cut","datachannel","dblclick","devicechange","devicemotion","deviceorientation","DOMActivate","DOMContentLoaded","DOMMouseScroll","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","durationchange","emptied","end","ended","endEvent","enterpictureinpicture","error","focus","focusin","focusout","formdata","fullscreenchange","fullscreenerror","gamepadconnected","gamepaddisconnected","gatheringstatechange","gesturechange","gestureend","gesturestart","gotpointercapture","hashchange","icecandidate","icecandidateerror","iceconnectionstatechange","icegatheringstatechange","input","inputsourceschange","install","invalid","keydown","keypress","keyup","languagechange","leavepictureinpicture","load","loadeddata","loadedmetadata","loadend","loadstart","lostpointercapture","mark","merchantvalidation","message","messageerror","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","msContentZoom","u8BufestureChange","u8BufestureEnd","u8BufestureHold","u8BufestureStart","u8BufestureTap","MSInertiaStart","MSManipulationStateChanged","mute","negotiationneeded","nomatch","notificationclick","offline","online","open","orientationchange","pagehide","pageshow","paste","pause","payerdetailchange","paymentmethodchange","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","pointerlockerror","pointermove","pointerout","pointerover","pointerup","popstate","progress","push","pushsubscriptionchange","ratechange","readystatechange","rejectionhandled","removestream","removetrack","removeTrack","repeatEvent","reset","resize","resourcetimingbufferfull","result","resume","scroll","search","seeked","seeking","select","selectedcandidatepairchange","selectend","selectionchange","selectstart","shippingaddresschange","shippingoptionchange","show","signalingstatechange","slotchange","soundend","soundstart","speechend","speechstart","squeeze","squeezeend","squeezestart","stalled","start","statechange","storage","submit","success","suspend","timeout","timeupdate","toggle","tonechange","touchcancel","touchend","touchmove","touchstart","track","transitioncancel","transitionend","transitionrun","transitionstart","unhandledrejection","unload","unmute","upgradeneeded","versionchange","visibilitychange","voiceschanged","volumechange","vrdisplayactivate","vrdisplayblur","vrdisplayconnect","vrdisplaydeactivate","vrdisplaydisconnect","vrdisplayfocus","vrdisplaypointerrestricted","vrdisplaypointerunrestricted","vrdisplaypresentchange","waiting","webglcontextcreationerror","webglcontextlost","webglcontextrestored","webkitmouseforcechanged","webkitmouseforcedown","webkitmouseforceup","webkitmouseforcewillbegin","wheel"];