let op,len,ns,attr,i,value,element,ptr,pos,end,out,char,numAttributes,endRounded,inptr,op_batch;export function work_last_created(){inptr.Work()};export function last_needs_memory(){return!inptr.view.buffer.byteLength};export function update_last_memory(e){inptr.UpdateMemory(e)};function exOp(e,t){let s,o,i,r,a,n,d,c,u,l;switch(31&t){case 0:e.lastNode=e.lastNode.firstChild;break;case 1:e.lastNode=e.lastNode.nextSibling;break;case 2:e.lastNode=e.lastNode.parentNode;break;case 3:e.nodes[e.decodeId()]=e.lastNode,e.u8BufPos+=e.idSize;break;case 4:e.lastNode=e.nodes[e.decodeId()],e.u8BufPos+=e.idSize;break;case 5:e.idSize=e.view.getUint8(e.u8BufPos++),e.updateDecodeIdFn();break;case 6:return!0;case 7:e.createFullElement();break;case 8:if(32&t?(s=e.nodes[e.decodeId()],e.u8BufPos+=e.idSize):s=e.lastNode,64&t)for(o=e.decodeU32(),d=0;d<o;d++)s.appendChild(e.nodes[e.decodeId()]),e.u8BufPos+=e.idSize;else s.appendChild(e.nodes[e.decodeId()]),e.u8BufPos+=e.idSize;break;case 9:if(32&t?(s=e.nodes[e.decodeId()],e.u8BufPos+=e.idSize):s=e.lastNode,64&t){for(o=e.decodeU32(),i=[],d=0;d<o;d++)i.push(e.nodes[e.decodeId()]),e.u8BufPos+=e.idSize;s.replaceWith(...i)}else s.replaceWith(e.nodes[e.decodeId()]),e.u8BufPos+=e.idSize;break;case 10:if(32&t?(s=e.nodes[e.decodeId()],e.u8BufPos+=e.idSize):s=e.lastNode,64&t){for(o=e.decodeU32(),i=[],d=0;d<o;d++)i.push(e.nodes[e.decodeId()]),e.u8BufPos+=e.idSize;s.after(...i)}else s.after(e.nodes[e.decodeId()]),e.u8BufPos+=e.idSize;break;case 11:if(32&t?(s=e.nodes[e.decodeId()],e.u8BufPos+=e.idSize):s=e.lastNode,64&t){for(o=e.decodeU32(),i=[],d=0;d<o;d++)i.push(e.nodes[e.decodeId()]),e.u8BufPos+=e.idSize;s.before(...i)}else s.before(e.nodes[e.decodeId()]),e.u8BufPos+=e.idSize;break;case 12:32&t?(e.nodes[e.decodeId()].remove(),e.u8BufPos+=e.idSize):e.lastNode.remove();break;case 13:e.lastNode=document.createTextNode(e.strings.substring(e.strPos,e.strPos+=e.decodeU16())),32&t&&(e.nodes[e.decodeId()]=e.lastNode,e.u8BufPos+=e.idSize);break;case 14:c=e.strings.substring(e.strPos,e.strPos+=e.decodeU16()),e.lastNode=32&t?document.createElementNS(c,e.strings.substring(e.strPos,e.strPos+=e.decodeU16())):document.createElement(c),64&t&&(e.nodes[e.decodeId()]=e.lastNode,e.u8BufPos+=e.idSize);break;case 15:32&t?(l=e.decodeId(),e.u8BufPos+=e.idSize,e.nodes[l].textContent=e.strings.substring(e.strPos,e.strPos+=e.decodeU16())):e.lastNode.textContent=e.strings.substring(e.strPos,e.strPos+=e.decodeU16());break;case 16:32&t?(r=e.nodes[e.decodeId()],e.u8BufPos+=e.idSize):r=e.lastNode,64&t?r.setAttribute(e.strings.substring(e.strPos,e.strPos+=e.decodeU16()),e.strings.substring(e.strPos,e.strPos+=e.decodeU16())):r.setAttribute(attrs[e.view.getUint8(e.u8BufPos++)],e.strings.substring(e.strPos,e.strPos+=e.decodeU16()));break;case 17:32&t?(r=e.nodes[e.decodeId()],e.u8BufPos+=e.idSize):r=e.lastNode,n=e.strings.substring(e.strPos,e.strPos+=e.decodeU16()),a=e.strings.substring(e.strPos,e.strPos+=e.decodeU16()),u=e.strings.substring(e.strPos,e.strPos+=e.decodeU16()),"style"===a?r.style[n]=u:null==a&&null==a||r.setAttributeNS(a,n,u);break;case 18:32&t?(r=e.nodes[e.decodeId()],e.u8BufPos+=e.idSize):r=e.lastNode,64&t?r.removeAttribute(e.strings.substring(e.strPos,e.strPos+=e.decodeU16())):r.removeAttribute(attrs[e.view.getUint8(e.u8BufPos++)]);break;case 19:32&t?(r=e.nodes[e.decodeId()],e.u8BufPos+=e.idSize):r=e.lastNode,n=e.strings.substring(e.strPos,e.strPos+=e.decodeU16()),r.removeAttributeNS(e.strings.substring(e.strPos,e.strPos+=e.decodeU16()),n);break;case 20:32&t?(e.lastNode=e.nodes[e.decodeId()].cloneNode(!0),e.u8BufPos+=e.idSize):e.lastNode=e.lastNode.cloneNode(!0),64&t&&(e.nodes[e.decodeId()]=e.lastNode,e.u8BufPos+=e.idSize);break;case 21:for(32&t?(r=e.nodes[e.decodeId()].cloneNode(!0).firstChild,e.u8BufPos+=e.idSize):r=e.lastNode.cloneNode(!0).firstChild;null!==r;r=r.nextSibling)1===e.view.getUint8(e.u8BufPos++)&&(e.nodes[e.decodeId()]=r,e.u8BufPos+=e.idSize)}}export class JsInterpreter{constructor(e,t,s,o,i,r){this.root=e,this.lastNode=e,this.nodes=[e],this.parents=[],this.view=new DataView(t.buffer),this.idSize=1,this.last_start_pos,this.metadata_ptr=s,this.ptr_ptr=o,this.str_ptr_ptr=i,this.str_len_ptr=r,this.strings="",this.strPos=0,this.decoder=new TextDecoder,inptr=this,this.updateDecodeIdFn()}NeedsMemory(){return 0===this.view.buffer.byteLength}UpdateMemory(e){0===this.view.buffer.byteLength&&(this.view=new DataView(e.buffer))}Work(){const e=this.view.getUint8(this.metadata_ptr);for(1&e&&(this.last_start_pos=this.view.getUint32(this.ptr_ptr,!0)),this.u8BufPos=this.last_start_pos,2&e&&(len=this.view.getUint32(this.str_len_ptr,!0),ptr=this.view.getUint32(this.str_ptr_ptr,!0),this.strings=len<100?4&e?this.batchedAsciiDecode(ptr,len):this.utf8Decode(ptr,len):this.decoder.decode(new DataView(this.view.buffer,ptr,len)),this.strPos=0);;){if(op_batch=this.view.getUint32(this.u8BufPos,!0),this.u8BufPos+=4,exOp(this,op=255&op_batch))return;if(exOp(this,op=255&(op_batch>>>=8)))return;if(exOp(this,op=255&(op_batch>>>=8)))return;if(exOp(this,op=255&(op_batch>>>=8)))return}}createElement(){return 255===(element=this.view.getUint8(this.u8BufPos++))?document.createElement(this.strings.substring(this.strPos,this.strPos+=this.decodeU16())):document.createElement(els[element])}createFullElement(){const e=this.decodeMaybeIdByteBool(),t=this.createElement();for(numAttributes=this.view.getUint8(this.u8BufPos++),i=0;i<numAttributes;i++)switch(attr=this.view.getUint8(this.u8BufPos++)){case 254:attr=this.strings.substring(this.strPos,this.strPos+=this.decodeU16()),ns=this.strings.substring(this.strPos,this.strPos+=this.decodeU16()),value=this.strings.substring(this.strPos,this.strPos+=this.decodeU16()),t.setAttributeNS(ns,attr,value);break;case 255:t.setAttribute(this.strings.substring(this.strPos,this.strPos+=this.decodeU16()),this.strings.substring(this.strPos,this.strPos+=this.decodeU16()));break;default:t.setAttribute(attrs[attr],this.strings.substring(this.strPos,this.strPos+=this.decodeU16()))}const s=this.view.getUint8(this.u8BufPos++);for(let e=0;e<s;e++)t.appendChild(this.createFullElement());return null!==e&&(this.nodes[e]=t),t}decodeMaybeIdByteBool(){if(0===this.view.getUint8(this.u8BufPos++))return null;{const e=this.decodeId();return this.u8BufPos+=this.idSize,e}}updateDecodeIdFn(){switch(this.idSize){case 1:this.decodeId=function(){return this.view.getUint8(this.u8BufPos)};break;case 2:this.decodeId=function(){return this.view.getUint16(this.u8BufPos,!0)};break;case 4:this.decodeId=function(){return this.view.getUint32(this.u8BufPos,!0)}}}decodeU32(){return this.u8BufPos+=4,this.view.getUint32(this.u8BufPos-4,!0)}decodeU16(){return this.u8BufPos+=2,this.view.getUint16(this.u8BufPos-2,!0)}SetNode(e,t){this.nodes[e]=t}GetNode(e){return this.nodes[e]}utf8Decode(e,t){for(end=(pos=e)+t,out="";pos<end;)if(0==(128&(char=this.view.getUint8(pos++))))out+=String.fromCharCode(char);else if(192==(224&char))out+=String.fromCharCode((31&char)<<6|63&this.view.getUint8(pos++));else if(224==(240&char))out+=String.fromCharCode((31&char)<<12|(63&this.view.getUint8(pos++))<<6|63&this.view.getUint8(pos++));else if(240==(248&char)){let e=(7&char)<<18|(63&this.view.getUint8(pos++))<<12|(63&this.view.getUint8(pos++))<<6|63&this.view.getUint8(pos++);e>65535&&(e-=65536,out+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),out+=String.fromCharCode(e)}else out+=String.fromCharCode(char);return out}batchedAsciiDecode(e,t){for(end=(pos=e)+t,out="",endRounded=pos+4*(t/4|0);pos<endRounded;)char=this.view.getUint32(pos),out+=String.fromCharCode(char>>24,(16711680&char)>>16,(65280&char)>>8,255&char),pos+=4;for(;pos<end;)out+=String.fromCharCode(this.view.getUint8(pos++));return out}};const els=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","portal","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"],attrs=["accept-charset","accept","accesskey","action","align","allow","alt","aria-atomic","aria-busy","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-dropeffect","aria-errormessage","aria-flowto","aria-grabbed","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-live","aria-owns","aria-relevant","aria-roledescription","async","autocapitalize","autocomplete","autofocus","autoplay","background","bgcolor","border","buffered","capture","challenge","charset","checked","cite","class","code","codebase","color","cols","colspan","content","contenteditable","contextmenu","controls","coords","crossorigin","csp","data","datetime","decoding","default","defer","dir","dirname","disabled","download","draggable","enctype","enterkeyhint","for","form","formaction","formenctype","formmethod","formnovalidate","formtarget","headers","height","hidden","high","href","hreflang","http-equiv","icon","id","importance","inputmode","integrity","intrinsicsize","ismap","itemprop","keytype","kind","label","lang","language","list","loading","loop","low","manifest","max","maxlength","media","method","min","minlength","multiple","muted","name","novalidate","open","optimum","pattern","ping","placeholder","poster","preload","radiogroup","readonly","referrerpolicy","rel","required","reversed","role","rows","rowspan","sandbox","scope","scoped","selected","shape","size","sizes","slot","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","summary","tabindex","target","title","translate","type","usemap","value","width","wrap"],events=["abort","activate","addstream","addtrack","afterprint","afterscriptexecute","animationcancel","animationend","animationiteration","animationstart","appinstalled","audioend","audioprocess","audiostart","auxclick","beforeinput","beforeprint","beforescriptexecute","beforeunload","beginEvent","blocked","blur","boundary","bufferedamountlow","cancel","canplay","canplaythrough","change","click","close","closing","complete","compositionend","compositionstart","compositionupdate","connect","connectionstatechange","contentdelete","contextmenu","copy","cuechange","cut","datachannel","dblclick","devicechange","devicemotion","deviceorientation","DOMActivate","DOMContentLoaded","DOMMouseScroll","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","durationchange","emptied","end","ended","endEvent","enterpictureinpicture","error","focus","focusin","focusout","formdata","fullscreenchange","fullscreenerror","gamepadconnected","gamepaddisconnected","gatheringstatechange","gesturechange","gestureend","gesturestart","gotpointercapture","hashchange","icecandidate","icecandidateerror","iceconnectionstatechange","icegatheringstatechange","input","inputsourceschange","install","invalid","keydown","keypress","keyup","languagechange","leavepictureinpicture","load","loadeddata","loadedmetadata","loadend","loadstart","lostpointercapture","mark","merchantvalidation","message","messageerror","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","msContentZoom","u8BufestureChange","u8BufestureEnd","u8BufestureHold","u8BufestureStart","u8BufestureTap","MSInertiaStart","MSManipulationStateChanged","mute","negotiationneeded","nomatch","notificationclick","offline","online","open","orientationchange","pagehide","pageshow","paste","pause","payerdetailchange","paymentmethodchange","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","pointerlockerror","pointermove","pointerout","pointerover","pointerup","popstate","progress","push","pushsubscriptionchange","ratechange","readystatechange","rejectionhandled","removestream","removetrack","removeTrack","repeatEvent","reset","resize","resourcetimingbufferfull","result","resume","scroll","search","seeked","seeking","select","selectedcandidatepairchange","selectend","selectionchange","selectstart","shippingaddresschange","shippingoptionchange","show","signalingstatechange","slotchange","soundend","soundstart","speechend","speechstart","squeeze","squeezeend","squeezestart","stalled","start","statechange","storage","submit","success","suspend","timeout","timeupdate","toggle","tonechange","touchcancel","touchend","touchmove","touchstart","track","transitioncancel","transitionend","transitionrun","transitionstart","unhandledrejection","unload","unmute","upgradeneeded","versionchange","visibilitychange","voiceschanged","volumechange","vrdisplayactivate","vrdisplayblur","vrdisplayconnect","vrdisplaydeactivate","vrdisplaydisconnect","vrdisplayfocus","vrdisplaypointerrestricted","vrdisplaypointerunrestricted","vrdisplaypresentchange","waiting","webglcontextcreationerror","webglcontextlost","webglcontextrestored","webkitmouseforcechanged","webkitmouseforcedown","webkitmouseforceup","webkitmouseforcewillbegin","wheel"];